#
# Standard Datadog check with service checks
#

init_config:
    service_checks:
        check_pg:
            command: /usr/local/bin/check_pg -h $host -P $port -d $dbname -u $username -p $password
            options:
                timeout: 2
                period: 15
                tag_by:
                    - port
                    - dbname

instances:
    -   host: localhost
        port: 5432
        username: my_username
        password: my_password
        dbname: postgres
        service_checks:
            - check_pg

    # instance that overrides service check options
    -   host: localhost
        port: 5433
        username: my_username
        password: my_password
        dbname: proddb
        service_checks:
            - check_pg:
                options:
                    timeout: 10
